<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="../helpproject.xsl" ?>
<topic template="Default" lasteditedby="rbwinst" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../helpproject.xsd">
  <title translate="true">Suggestions on Compiling</title>
  <body>
    <header>
      <para styleclass="Heading1"><text styleclass="Heading1" translate="true">Suggestions on Compiling MODFLOW-2000</text></para>
    </header>
    <para styleclass="Normal"><text styleclass="Normal" translate="true">Most users will not need to compile MODFLOW-2000 because you can download a compiled version of MODFLOW-2000 from the USGS web site. &#160;However, if you wish to make changes to the source code, you will need to compile it yourself.</text></para>
    <para styleclass="Normal"><text styleclass="Normal" translate="true">Nearly all the Fortran code in MODFLOW is standard Fortran that will compile the same way with any compiler. &#160;However, a small portion of the code uses compiler-dependent code. &#160;This compiler dependent code is included in the file &quot;openspec.inc&quot;. &#160;Be sure to modify this file to the correct form for your compiler. &#160;There are extensive comments in openspec.inc that can help you.</text></para>
    <para styleclass="Normal"><text styleclass="Normal" translate="true">Prior to version 1.15.00, MODFLOW-2000 was written entirely in Fortran. &#160;However, the GMG package added in version 1.15.00 is written primarily in C (with a small amount of Fortran code to link to the C code). &#160;This makes compiling MODFLOW-2000 a bit more challenging than previously. Now, instead of just a Fortran compiler, a C compiler is also required. If one is not aware that the C language is case-sensitive and &#160;the Fortran language is case insensitive, some error messages returned by compilers may be difficult to understand. Often the C compiler will &quot;decorate&quot; the name of the C function and the linker can&apos;t figure out how to link Fortran object code with an undecorated name with C object code with a decorated name. Users should try to find the switches in the compilers and linkers that control how names are decorated so that the object code generated by the C and Fortran compilers use consistent names.</text></para>
    <para styleclass="Normal"><text styleclass="Normal" translate="true">This web page gives advice on compiling MODFLOW-2000 with some compilers. &#160;However, no attempt has been made to test all Fortran compilers. &#160;If you have information on how to compile it with another compiler, please send to rbwinst@usgs.gov so it can be included on this web page.</text></para>
    <para styleclass="Normal"><text styleclass="Normal" translate="true">If you wish to compile a parallel version of MODFLOW-2000, you will need to get a copy of mpif.h. &#160;</text></para>
    <para styleclass="Normal"><snippet src="Parallel_Modflow"/></para>
    <para styleclass="Normal"><text styleclass="Normal" translate="true">There is more info in the </text><link displaytype="text" defaultstyle="true" type="topiclink" href="Frequently_Asked_Questions" anchor="mpifh" styleclass="Normal" translate="true">FAQ</link><text styleclass="Normal" translate="true"> about compiling a parallel version of MODFLOW-2000.</text></para>
    <para styleclass="Normal"><text styleclass="Normal" style="font-weight:bold;" translate="true">You should check that the variables specified in openspec.inc are specified correctly for your compiler.</text><text styleclass="Normal" translate="true"> There is more information about this in the </text><link displaytype="text" defaultstyle="true" type="topiclink" href="Frequently_Asked_Questions" anchor="openspec" styleclass="Normal" translate="true">FAQ</link><text styleclass="Normal" translate="true">.</text></para>
    <para styleclass="Normal"><text styleclass="Normal" translate="true">References to commercial vendors of software products or services are provided solely for the convenience of users when obtaining or using USGS software. Such references do not imply any endorsement by the U.S. Government.</text></para>
    <para styleclass="Normal"><text styleclass="Normal" translate="true">The information on this web page was provided with the assistance of Edward Banta, Steffan Mehl, Henk den Adel, William R. Hutchison, and Richard Winston. &#160;The instructions may be outdated or incorrect. &#160;If you find that the instructions are in error, please send corrections to </text><link displaytype="text" defaultstyle="true" type="weblink" href="mailto:rbwinst@usgs.gov" styleclass="Normal" translate="true">rbwinst@usgs.gov</link><text styleclass="Normal" translate="true">.</text></para>
    <para styleclass="Normal" style="text-indent:-18px; margin-left:18px;"><image src="hmtoggle_plus0.gif" scale="100.00%" styleclass="Normal"></image><tab /><toggle type="dropdown" print-expanded="true" help-expanded="false" defaultstyle="true" translate="true" src-collapsed="hmtoggle_plus0.gif" src-expanded="hmtoggle_plus1.gif" styleclass="Normal"><caption translate="true"><![CDATA[Lahey-Fujitsu Fortran 95 (LF95)]]></caption></toggle></para>
    <para styleclass="Normal" style="text-indent:-18px; margin-left:18px;"><table rowcount="1" colcount="1" style="width:auto; cell-padding:0px; cell-spacing:0px; page-break-inside:auto; border-width:0px; border-spacing:0px; cell-border-width:0px; border-style:none; background-color:none; head-row-background-color:none; alt-row-background-color:none;">
      <tr style="vertical-align:top">
        <td>
          <list id="23" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Make sure that you have installed the Fujitsu C compiler that comes with LF95. &#160;The compiler is named fcc.exe. &#160;It should be in the &quot;bin&quot; directory under the directory in which LF95 is installed. &#160;If you have not installed the Fujitsu C compiler, install it from the same CD (or other media) on which you received LF95. &#160;After installing it, be sure to also install the most recent patch file for your version of LF95 from the Lahey web site.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Download MODFLOW-2000.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Extract all the source code being sure to retain the directory structure inside the compressed download file.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Download </text><link displaytype="text" defaultstyle="true" type="filelink" href="automake.fig" styleclass="Normal" translate="true">automake.fig</link><text styleclass="Normal" translate="true"> and place it in the same directory as the source code (for example C:\Wrdapp\mf2k.1_17\src\mf2k).</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">In the directory with the MODFLOW-2000 source code, create a subdirectory named &quot;objLF95&quot; (for example C:\Wrdapp\mf2k.1_17\src\mf2k\objLF95).</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">In the mf2k src directory create a subdirectory named &quot;bin&quot; (for example C:\Wrdapp\mf2k.1_17\src\bin).</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Edit the line in Automake.fig that specifies the location of the include files of the Fujitsu C compiler to use the correct path for your system. &#160;That line is</text></li>
          </list>
          <para styleclass="Normal"></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true"> &#160; &#160; &#160;COMPILE=@fcc /c /D _UF /I C:\Compilers\Lahey\LF9557\Include /o .\objLF95\%sf%oe %fi</text></para>
          <para styleclass="Normal"></para>
          <list id="24" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="8" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">You can run AutoMake to compile MODFLOW-2000 either by running the file AM.bat (which is distributed with LF95) from the command prompt or by doing the following.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Start the Lahey ED Developer.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Open any of the source code files for MODFLOW-2000.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Click on the Automake button.</text></li>
          </list>
          <para styleclass="Normal" style="text-align:center;"><image src="AutomakeButton.PNG" scale="100.00%" styleclass="Image Caption"><title translate="true">Automake Button</title></image></para>
        </td>
      </tr>
    </table></para>
    <para styleclass="Normal" style="text-indent:-18px; margin-left:18px;"><image src="hmtoggle_plus0.gif" scale="100.00%" styleclass="Normal"></image><tab /><toggle type="dropdown" print-expanded="true" help-expanded="false" defaultstyle="true" translate="true" src-collapsed="hmtoggle_plus0.gif" src-expanded="hmtoggle_plus1.gif" styleclass="Normal"><caption translate="true"><![CDATA[Compaq Digital Visual Fortran]]></caption></toggle></para>
    <para styleclass="Normal" style="text-indent:-18px; margin-left:18px;"><table rowcount="1" colcount="1" style="width:auto; cell-padding:0px; cell-spacing:0px; page-break-inside:auto; border-width:0px; border-spacing:0px; cell-border-width:0px; border-style:none; background-color:none; head-row-background-color:none; alt-row-background-color:none;">
      <tr style="vertical-align:top">
        <td>
          <list id="25" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Download MODFLOW-2000.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Extract all the source code being sure to retain the directory structure inside the compressed download file.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Copy parallel.inc from the mf2k.1_17\src\mf2k directory to the mf2k.1_17\src\mf2k\serial directory.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Open Solvers.C in a text editor, and change all copies of &quot;resprint&quot; to &quot;RESPRINT&quot;. (lines 52, 173, 201, and 234)</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Make sure you have Visual Studio installed. It comes with Compaq Digital Visual Fortran.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Make sure you have Microsoft Visual C++ installed. &#160;You might need to purchase Microsoft Visual C++ separately.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Start Visual Studio.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Select File|New and create a new Project that is a Fortran Console Application. &#160;A good location for the project would be in C:\MF2K.1_17\SRC which Visual studio will change to C:\MF2K.1_17\SRC\mf2k. &#160;After you click the OK button, choose &quot;An empty project&quot; (the default) and click on the Finish button. &#160;Then click OK to close the &quot;New Project Information&quot; dialog box.</text></li>
          </list>
          <para styleclass="Normal" style="text-align:center;"><image src="CompaqNewProject.PNG" scale="100.00%" styleclass="Image Caption"><title translate="true">Compaq New Project dialog box</title></image></para>
          <list id="26" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="9" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Change to &quot;File View&quot; and right click on &quot;mf2k files&quot;. Select Add Files to Project.</text></li>
          </list>
          <para styleclass="Normal" style="text-align:center;"><image src="CompaqAddNewFiles.PNG" scale="100.00%" styleclass="Image Caption"><title translate="true">Compaq &quot;File View&quot; mode with pop-up menu</title></image></para>
          <list id="27" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="10" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Select all the files with the extensions .c and .h in the \src\mf2k directory.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Right click on &quot;mf2k files&quot; again and select Add Files to Project. &#160;This time, change the file type to Fortran Source files and add all the Fortran source files in the \src\mf2k directory.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Right click on &quot;mf2k files&quot; again and select Add Files to Project. &#160;Change the file type to Fortran Source files and add para-non.f &#160;in the \src\mf2k\serial directory.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">On line 398 of gmg1.f, add a “c” in column one in order to comment out the “_resprint” reference: </text></li>
          </list>
          <para styleclass="Normal" style="margin-left:24px;"><text styleclass="Normal" translate="true">c &#160; &#160; &#160;!DEC$ ATTRIBUTES ALIAS:&apos;_resprint&apos; :: RESPRINT</text></para>
          <list id="27" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="10" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Select &quot;Project|Settings&quot; and on the C/C++ tab change the &quot;Category&quot; to &quot;Code Generation&quot; and then change the &quot;Calling Convention&quot; to &quot;__stdcall&quot;.</text></li>
          </list>
          <para styleclass="Normal" style="text-align:center;"><image src="CompaqProjectSettingStdcall.PNG" scale="100.00%" styleclass="Image Caption"><title translate="true">Compaq Project Settings dialog box with __stdcall selected</title></image></para>
          <list id="28" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="14" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Change to the Link tab and add &quot;DFOR.LIB&quot; to the end of the list of &#160;Object/libray modules.</text></li>
          </list>
          <para styleclass="Normal" style="text-align:center;"><image src="CompaqProjectSettingDfor.png" scale="100.00%" styleclass="Image Caption"><title translate="true">Compaq Project Settings dialog box with DFOR.LIB showing</title></image></para>
          <list id="29" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="15" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Click the OK button to close the Project Settings dialog box. &#160;Then select Build|Build mf2k.exe</text></li>
          </list>
        </td>
      </tr>
    </table></para>
    <para styleclass="Normal" style="text-indent:-18px; margin-left:18px;"><image src="hmtoggle_plus0.gif" scale="100.00%" styleclass="Normal"></image><tab /><toggle type="dropdown" print-expanded="true" help-expanded="false" defaultstyle="true" translate="true" src-collapsed="hmtoggle_plus0.gif" src-expanded="hmtoggle_plus1.gif" styleclass="Normal"><caption translate="true"><![CDATA[Microsoft Visual Studio .NET 2003 and the Intel Fortran Compiler 8.1.]]></caption></toggle></para>
    <para styleclass="Normal" style="text-indent:-18px; margin-left:18px;"><table rowcount="1" colcount="1" style="width:auto; cell-padding:0px; cell-spacing:0px; page-break-inside:auto; border-width:0px; border-spacing:0px; cell-border-width:0px; border-style:none; background-color:none; head-row-background-color:none; alt-row-background-color:none;">
      <tr style="vertical-align:top">
        <td>
          <para styleclass="Normal"><text styleclass="Normal" style="font-weight:bold;" translate="true">Thanks to Ingo Berg for the following instructions. Thanks to Edward Banta and Eileen Poeter for additional suggestions.</text></para>
          <list id="30" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">First, extract the source code being sure to retain the directory structure inside the compressed download file.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Copy par-non.f from the mf2k.1_17\src\mf2k\serial directory to the mf2k.1_17\src\mf2k directory.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Open Solvers.h in a text editor. At the beginning of the file, comment out the following three lines (6,7,8) by placing a &quot;//&quot; in front of them like:</text></li>
          </list>
          <para styleclass="Normal"></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true"> &#160; &#160; &#160;//#ifdef _UF</text></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true"> &#160; &#160; &#160;//#define resprint resprint_</text></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true"> &#160; &#160; &#160;//#endif</text></para>
          <para styleclass="Normal"></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true"> &#160; &#160; &#160;Behind this block write the following line:</text></para>
          <para styleclass="Normal"></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true"> &#160; &#160; &#160;#define resprint RESPRINT</text></para>
          <para styleclass="Normal"></para>
          <list id="31" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="4" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Open Microsoft Visual Studio .NET and create a new project using the &quot;File | New | Project menu&quot;. Select Intel(R) Fortran Projects on the left side of the window and choose &quot;Console Application&quot; on the right side. Name the project mf2k_net and select ...\mf2k.1_17\src\mf2k as the project location. The IDE will create a new directory with that name to store the project.</text></li>
          </list>
          <para styleclass="Normal"></para>
          <para styleclass="Normal" style="text-align:center;"><image src="pic1.png" scale="100.00%" styleclass="Image Caption"><title translate="true">Creating a new Fortran project</title></image></para>
          <para styleclass="Normal"></para>
          <para styleclass="Normal" style="margin-left:24px;"><text styleclass="Normal" translate="true">Press OK. A Window with the application wizard will open. Go to the application settings and select &quot;Empty Project&quot;. Press finish afterwards.</text></para>
          <para styleclass="Normal"></para>
          <para styleclass="Normal" style="text-align:center;"><image src="pic2.png" scale="100.00%" styleclass="Image Caption"><title translate="true">Empty project</title></image></para>
          <para styleclass="Normal"></para>
          <list id="32" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="5" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">You should now see the Microsoft .NET IDE with the project explorer treeview on the right side. In the File menu select &quot;File | Add existing element&quot;. A File dialog box will appear. This dialog box shows the content of the newly created &quot;mf2k_net&quot; directory, which does not contain any Fortran files yet. Go to the parent directory. (Press the small yellow symbol with the buckled arrow pointing upwards on top of the window). You should now see the content of the &quot;mf2k&quot; directory which consists of the Fortran files. Select all of them. In order to select all of the files, hold the shift key down and select the first and the last file. After doing this press &quot;open&quot;. Now you should see the files added to the project explorer treeview.</text></li>
          </list>
          <para styleclass="Normal"></para>
          <para styleclass="Normal" style="text-align:center;"><image src="pic3.png" scale="100.00%" styleclass="Image Caption"><title translate="true">Fortran project with source files.</title></image></para>
          <para styleclass="Normal"></para>
          <para styleclass="Normal"></para>
          <list id="33" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="6" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Now we have a project with the fortran source code files. The part that is missing are the C-source code files. These will be added next. Since It is not possible to mix Fortran and c code within the same project, we have to create another project containing the c files. From the main menu, select &quot;File | New | Project&quot;. From the &quot;Visual C++ Projects&quot; node on the left side, select &quot;Win32&quot;. From the right side, select &quot;Win32-Project&quot;. Assign &quot;mf2k_gmg&quot; as the project name and assign ...\mf2k.1_17\src\mf2k as the project path. Make sure you have the &quot;Add to project&quot; radiobutton active; otherwise, the IDE would close the previousely created Fortran project.</text></li>
          </list>
          <para styleclass="Normal"></para>
          <para styleclass="Normal" style="text-align:center;"><image src="pic4.png" scale="100.00%" styleclass="Image Caption"><title translate="true">Add to Project</title></image></para>
          <para styleclass="Normal"></para>
          <list id="34" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="7" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Press OK. The Project C++ project wizard will open. Go to the application settings and select &quot;Static library&quot;. Uncheck the &quot;Precompiled headers&quot; option.</text></li>
          </list>
          <para styleclass="Normal"></para>
          <para styleclass="Normal" style="text-align:center;"><image src="pic5.png" scale="100.00%" styleclass="Image Caption"><title translate="true">C++ Project Wizard</title></image></para>
          <para styleclass="Normal"></para>
          <para styleclass="Normal" style="margin-left:24px;"><text styleclass="Normal" translate="true">Press the &quot;Create&quot; Button. You will see a second project appear in the Project explorer treeview. This project is the static library for the GMG components which are written in C. Next we have to add the source files. In the Project explorer select the &quot;mf2k_gmg&quot; project. From the main menu, select &quot;File | Add existing element&quot;. In the file input dialog box, go to the parent directory. (Press the small yellow symbol with the buckled arrow pointing upwards on top of the window.) Select all files with the extension *.c and *.h. (Do not include the *.inc files!). Again, multiple files can be selected by holding the shift key down. Press open; the new files will appear in the Project explorer.</text></para>
          <list id="35" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="8" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">The next step is telling the IDE to link the gmg library file to the main program. For this reason first compile the &quot;mf2k_gmg&quot; project in order to create a library file. Select the project; press the right mouse button; and select the &quot;build&quot; menu entry. You should see the library compile. If successful, a file named &quot;mf2k_gmg.lib&quot; should be created in either the &quot;mf2k\mf2k_gmg\Debug&quot; or the &quot;mf2k\mf2k_gmg\Release&quot; directory. The location depends on whether &quot;debug&quot; or &quot;release&quot; is selected as the build option in your IDE. For this test, the file is assumed to be located in the &quot;Debug&quot; directory.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">In the &quot;Project Explorer&quot; treeview, select the &quot;Ressource Files&quot; node from &quot;mf2k_net&quot; project. This is the place where we are going to add the gmg lib file. Press the right mouse button and select &quot;Add | Existing Element&quot;. A file selector will open. Go to the &quot;mf2k_gmg/Debug directory&quot;. In the File types selector at the bottom of the window, change the filter to *.*. Select the file &quot;mf2k_gmg.lib&quot; and press open. The gmg lib has now been added to the main program.</text></li>
          </list>
          <para styleclass="Normal"></para>
          <para styleclass="Normal" style="text-align:center;"><image src="pic6.png" scale="100.00%" styleclass="Image Caption"><title translate="true">mf2k_gmg lib</title></image></para>
          <para styleclass="Normal"></para>
          <list id="36" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="10" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Finally select the &quot;mf2k_net&quot; Project and build it. The output file will be created either as &quot;mf2k.1_17\src\mf2k\mf2k_net\Debug}mf2k_net&quot; or as &quot;mf2k.1_17\src\mf2k\mf2k_net\Debug}mf2k_net&quot;. If you wish, change the name of the output file in the Project settings or rename it manually to mf2k.</text></li>
            <li styleclass="Normal"></li>
          </list>
          <para styleclass="Normal"><snippet src="IgnoreMSVCRT"/></para>
        </td>
      </tr>
    </table></para>
    <para styleclass="Normal" style="text-indent:-18px; margin-left:18px;"><image src="hmtoggle_plus0.gif" scale="100.00%" styleclass="Normal"></image><tab /><toggle type="dropdown" print-expanded="true" help-expanded="false" defaultstyle="true" translate="true" src-collapsed="hmtoggle_plus0.gif" src-expanded="hmtoggle_plus1.gif" styleclass="Normal"><caption translate="true"><![CDATA[Microsoft Visual Studio C++ .NET 2003 and the Intel Fortran Compiler 9.0.]]></caption></toggle></para>
    <para styleclass="Normal" style="text-indent:-18px; margin-left:18px;"><table rowcount="1" colcount="1" style="width:auto; cell-padding:0px; cell-spacing:0px; page-break-inside:auto; border-width:0px; border-spacing:0px; cell-border-width:0px; border-style:none; background-color:none; head-row-background-color:none; alt-row-background-color:none;">
      <tr style="vertical-align:top">
        <td>
          <para styleclass="Normal"><text styleclass="Normal" style="font-weight:bold;" translate="true">Thanks to Edward Banta for the following instructions. Thanks to Edward Banta and Eileen Poeter for additional suggestions.</text></para>
          <list id="37" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">First, extract the MODFLOW-2000 source code, being sure to retain the directory structure inside the compressed download file.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Copy para-non.f from the src\mf2k\serial folder to the src\mf2k folder.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Open Microsoft Visual Studio .NET 2003 and create a new solution using File … New … Blank Solution. Name the solution “MF2K_Solution” and for Location, browse to an existing folder; it would be convenient to use the folder that is the parent of the src folder of the MODFLOW-2000 distribution, but the location can be anywhere. &#160;The new solution will be in a subfolder that will be created under the selected folder. &#160;Click OK.New Console Application - MF2K</text></li>
          </list>
          <para styleclass="Normal" style="text-align:center;"><text styleclass="Normal" translate="true">&#32;</text><image src="VS2003_image001.png" scale="100.00%" styleclass="Image Caption"><title translate="true">New Project</title></image></para>
          <list id="37" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Create a project in the “MF2K_Solution” solution you just made. To do this, in the Solution Explorer panel right click Solution ‘MF2K_Solution’ and select Add…New Project. &#160;In the Add New Project dialog, click on “Intel Fortran Projects” in the left panel and ensure that “Console Application” is selected in the right panel. &#160;Change the name to “mf2k” and click OK.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">The Fortran Console Application wizard will open. Click on Application Settings and select &quot;Empty Project&quot;. &#160;Click Finish.Empty Project. </text></li>
          </list>
          <para styleclass="Normal" style="text-align:center;"><image src="VS2003_image003.png" scale="100.00%" styleclass="Image Caption"><title translate="true">Empty Project</title></image></para>
          <list id="37" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">The next step is to add Fortran source code files to the mf2k project. &#160;In the Solution Explorer panel under the “mf2k” project, right click “Source Files” and select Add…Add Existing Item. &#160;Navigate to the src\mf2k folder of the MODFLOW-2000 distribution. &#160;Ensure that the “Files of type” filter is “Common Intel Fortran files”. &#160;Select all the *.f and *.f90 files (click on the first one and &lt;Shift&gt;-click on the last one). &#160;Click Open. &#160;Add more files to the “Source Files” list, but this time set the “Files of type” filter to “All Files”. &#160;Select ground.com then use &lt;Ctrl&gt;-click to add hydmod.inc, lmt6.inc, openspec.inc, param.inc, params.inc, and startdaf.com to the selection. &#160;Click Open.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Now we have a project with the Fortran source code files. The C source code will be added next. Since it is not possible to mix Fortran and C code within the same project, we have to create another project containing the C files. &#160;In the Solution Explorer panel, right click Solution ‘MF2K_Solution’ and select Add…New Project. &#160;In the Add New Project dialog, expand “Visual C++ Projects” in the left panel and select Win32. &#160;In the right panel, select “Win32 Project” and enter “mf2k_gmg” as the name. &#160;Click OK. &#160;In the Win32 Application Wizard dialog, click “Application Settings” and then under Application type, select “static library” and clear the “Precompiled header” check box. &#160;Click Finish.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">You will see a second project appear in the Solution Explorer panel. This project will be used to create a static library for the GMG components that are written in C. Next we have to add the C source files. In the Solution Explorer panel, under the “mf2k_gmg” project, right click “Source Files” and select Add…Add Existing Item. &#160;Navigate to the src\mf2k folder of the MODFLOW-2000 distribution and select all the *.c files (four of them). &#160;In a similar manner, add the four *.h files in the src\mf2k folder under “Header Files” in the Solution Explorer panel.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">The next step to tell the IDE to link the GMG library file to the mf2k project, but first the GMG static library needs to be compiled. In the drop-down list near the top of the Visual Studio window, change the configuration (which is not labeled as such) from “Debug” to “Release”. The next step is to compile the &quot;mf2k_gmg&quot; project in order to create a library file. Select the project; press the right mouse button; and select the &quot;build&quot; menu entry. You should see the library compile. If successful, a file named &quot;mf2k_gmg.lib&quot; should be created in the &quot;MF2K_Solution\mf2k_gmg\Release&quot; directory.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">In the Solution Explorer panel, select &quot;Resource Files&quot; under the &quot;mf2k&quot; project. This is the place where we are going to add the GMG library file. Press the right mouse button and select Add … Add Existing Item&quot;. A file selector will open. Go to the &quot;MF2K_Solution\mf2k_gmg\Release directory&quot;. In the File types selector at the bottom of the window, change the filter to All Files. Select the file &quot;mf2k_gmg.lib&quot; and press open. The GMG library has now been added to the solution.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Finally, select the &quot;mf2k&quot; project and build it. The output file will be created as mf2k.exe in the MF2K_Solution\mf2k\Release folder. &#160;To save the solution, on the File menu click “Save All”.</text></li>
            <li styleclass="Normal"></li>
          </list>
          <para styleclass="Normal"><snippet src="IgnoreMSVCRT"/></para>
          <list id="37" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">The steps above generate a mixed precision executable file, like the one posted on the MODFLOW-2000 web page. &#160;In some cases, it is advantageous to use a fully double precision version of MODFLOW-2000 to generate satisfactory results. &#160;A fully double precision executable can be generated as follows. &#160;Select the mf2k project in the Solution Explorer panel. &#160;On the main menu bar select Project…Properties. In the mf2k Property Page dialog, select Fortran and under Fortran select Data. &#160;Change the Default Real KIND from 4 to 8. &#160;Click OK. &#160;Again, build the mf2k project. &#160;The resulting mf2k.exe program is now fully double-precision. You might want to rename it as “mf2k-dp.exe”. &#160;Be aware that programs that read binary files produced by MODFLOW-2000 (e.g. Modpath, Zonebudget, ModelViewer) expect to read single-precision data, and they will be unable to read data from binary files produced by a double-precision version of MODFLOW-2000. &#160;Those programs, however, could be similarly recompiled as fully double precision, which would enable them to read double precision binary files.</text></li>
          </list>
        </td>
      </tr>
    </table></para>
    <para styleclass="Normal" style="text-indent:-18px; margin-left:18px;"><image src="hmtoggle_plus0.gif" scale="100.00%" styleclass="Normal"></image><tab /><toggle type="dropdown" print-expanded="true" help-expanded="false" defaultstyle="true" translate="true" src-collapsed="hmtoggle_plus0.gif" src-expanded="hmtoggle_plus1.gif" styleclass="Normal"><caption translate="true"><![CDATA[Microsoft Visual Studio 2005 with Intel Fortran Compiler 11.1]]></caption></toggle></para>
    <para styleclass="Normal" style="text-indent:-18px; margin-left:18px;"><table rowcount="1" colcount="1" style="width:auto; cell-padding:0px; cell-spacing:0px; page-break-inside:auto; border-width:0px; border-spacing:0px; cell-border-width:0px; border-style:none; background-color:none; head-row-background-color:none; alt-row-background-color:none;">
      <tr style="vertical-align:top">
        <td>
          <para styleclass="Normal"><text styleclass="Normal" style="font-weight:bold;" translate="true">Thanks to Christian D Langevin and David Ahlfeld for the following instructions. Thanks to Edward Banta, Eileen Poeter and Seung Jae Lee for additional suggestions.</text></para>
          <list id="38" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">First, extract the source code being sure to retain the directory structure inside the compressed download file.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Copy par-non.f from the mf2k.1_17\src\mf2k\serial directory to the mf2k.1_17\src\mf2k directory.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Open Microsoft Visual Studio</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">File&gt;New&gt;Project: Make sure to select the settings according to the following window. &#160;You can give the project a name, such as mf2k, and set the location to the location of the MODFLOW Fortran source files. &#160;Then click OK.</text></li>
          </list>
          <para styleclass="Normal" style="text-align:center;"><image src="VS2005_NewProject.png" scale="100.00%" styleclass="Image Caption"><title translate="true">Dialog box with the Console Application selected for an Intel Fortran project</title></image></para>
          <para styleclass="Normal" style="margin-left:24px;"><text styleclass="Normal" translate="true">Click Next to the &quot;Welcome to the Fortran Console Application Wizard&quot;.</text></para>
          <list id="38" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Click &quot;Empty Project&quot; under the &quot;Application Settings&quot; window, and then click Finish.</text></li>
          </list>
          <para styleclass="Normal" style="text-align:center;"><image src="VS2005_ApplicationSettings.png" scale="100.00%" styleclass="Image Caption"><title translate="true">Fortran Consol Application Wizard. Empty project selected.</title></image></para>
          <list id="38" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Now you need to add all of the Fortran files to the mf2k project that you just created. &#160;You can do this by selecting Project&gt;Add Existing Item... &#160;Select all of the Fortran source files in the mf2k subdirectory and click Add.</text></li>
          </list>
          <para styleclass="Normal" style="text-align:center;"><image src="VS2005_AddItems.png" scale="100.00%" styleclass="Image Caption"><title translate="true">Add Fortran files.</title></image></para>
          <list id="38" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; font-weight:normal; font-style:normal; text-decoration:line-through; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;" translate="true">Confirm that the following line is present gmg1.f after the line containing &quot;SUBROUTINE RESPRINT&quot;:</text></li>
          </list>
          <para styleclass="Normal"></para>
          <para styleclass="Normal"><text styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; font-weight:normal; font-style:normal; text-decoration:line-through; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;" translate="true"> &#160; &#160; &#160; &#160; &#160; &#160;!DEC$ ATTRIBUTES ALIAS:&apos;_resprint&apos; :: RESPRINT</text></para>
          <para styleclass="Normal"></para>
          <list id="38" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Next, you need to create a new project for the GMG solver because a project can contain only a single programming language. &#160;Click File&gt;New&gt;Project. &#160;Then select the settings as follows making sure to &quot;Add to Solution&quot;.</text></li>
          </list>
          <para styleclass="Normal" style="text-align:center;"><image src="VS2005_NewCProject.png" scale="100.00%" styleclass="Image Caption"><title translate="true">Empty C++ project for GMG solver.</title></image></para>
          <list id="38" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Now you should see that the gmg project has been added to the solution. &#160;This will be shown in the Solution Explorer Window, which may be on the right-side of the screen. &#160;To add the gmg C files to the gmg project, select Project&gt;Add Existing Item... (make sure that the gmg project is selected in the solution window). &#160;Add only the .c and .h files as follows and click Add: </text></li>
          </list>
          <para styleclass="Normal" style="text-align:center;"><image src="VS2005_AddCFiles.png" scale="100.00%" styleclass="Image Caption"><title translate="true">Add .c and .h files for GMG solver.</title></image></para>
          <list id="38" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Now select Project&gt;Project Dependencies. &#160;Then select the mf2k project and check the underlying box that says gmg as follows: </text></li>
          </list>
          <para styleclass="Normal" style="text-align:center;"><image src="VS2005_ProjectDependencies.png" scale="100.00%" styleclass="Image Caption"><title translate="true">Make Fortran project depend on gmg project.</title></image></para>
          <list id="38" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Now select the project properties for the gmg project and change the configuration type from .exe to a static library (.lib) as follows: </text></li>
          </list>
          <para styleclass="Normal" style="text-align:center;"><image src="VS2005_ConfigurationType.png" scale="100.00%" styleclass="Image Caption"><title translate="true">Make GMG project a static library</title></image></para>
          <list id="38" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; font-weight:normal; font-style:normal; text-decoration:line-through; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;" translate="true">Now, open the solvers.h file, which is a Header File under the gmg project. &#160;As Ingo Berg mentioned in his description of compiling MODFLOW-2000 with Microsoft Visual Studio .NET 2003, you need make the following changes. &#160;Comment out the following three lines by placing a // in front of them</text></li>
          </list>
          <para styleclass="Normal" style="margin-left:24px;"></para>
          <para styleclass="Normal" style="margin-left:24px;"><text styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; font-weight:normal; font-style:normal; text-decoration:line-through; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;" translate="true">//#ifdef_UF</text></para>
          <para styleclass="Normal" style="margin-left:24px;"><text styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; font-weight:normal; font-style:normal; text-decoration:line-through; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;" translate="true">//#define resprint resprint_</text></para>
          <para styleclass="Normal" style="margin-left:24px;"><text styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; font-weight:normal; font-style:normal; text-decoration:line-through; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;" translate="true">//#endif</text></para>
          <para styleclass="Normal" style="margin-left:24px;"></para>
          <para styleclass="Normal" style="margin-left:24px;"><text styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; font-weight:normal; font-style:normal; text-decoration:line-through; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;" translate="true">(According the David Ahlfeld, MODFLOW will still compile if this instruction is omitted.)</text></para>
          <para styleclass="Normal" style="margin-left:24px;"></para>
          <list id="39" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="13" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; text-decoration:line-through; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; font-weight:normal; font-style:normal; text-decoration:line-through; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;" translate="true">After these commented lines add the following line:</text></li>
          </list>
          <para styleclass="Normal" style="margin-left:24px;"></para>
          <para styleclass="Normal" style="margin-left:24px;"><text styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; font-weight:normal; font-style:normal; text-decoration:line-through; text-transform:none; vertical-align:baseline; color:#000000; background-color:transparent; letter-spacing:normal; letter-scaling:100%;" translate="true">#define resprint RESPRINT</text></para>
          <para styleclass="Normal" style="margin-left:24px;"></para>
          <para styleclass="Normal" style="margin-left:24px;"><text styleclass="Normal" translate="true">(The original instructions from Christian D Langevin included the instruction above but according to David Ahlfeld they are not required and they cause a linker error.)</text></para>
          <list id="40" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="14" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">In the Fortran code project property (shown after click on the &apos;property&apos; in the popped list when you right-click on the title of the Fortran project in the solution explorer), &apos;Configuration properties&gt;Fortran&gt;Diagnostics&gt;Check Routine Interfaces&apos; should be &quot;NO&quot;, otherwise the program generates error messages.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">In the Fortran code project property, &apos;Configuration properties&gt;Linker&gt;General&gt;Enable Incremental Linking&quot; should be &quot;YES&quot;, to avoid an error.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">The same option for both of &apos;Configuration properties&gt;Fortran&gt;Libraries&gt;Runtime Library&apos; in the Fortran code project property and &apos;Configuration properties&gt;C/C++&gt;Code Generation&gt;Runtime Library&apos; in the C code project, i.e., gmg, property is recommended. E.g., if &quot;Multi-threaded Debug (/MTd)&quot; is chosen for the C code part, the same one is recommended to choose for the counterpart in the Fortran project.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">If &quot;DLL&quot; is chosen, it will cause an error. E.g., &quot;Multi-threaded DLL (/MD)&quot; is chosen for &apos;Configuration properties&gt;C/C++&gt;Code Generation&gt;Runtime Library&apos; in the C code project property will not work.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Also include the path to the default Intel Fortan header file and library directories in the project property dialog box.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">You are now ready to compile MODFLOW-2000, including the GMG solver. &#160;Click Build&gt;Build Solution. &#160;Keep in mind that &quot;debug&quot; is the default configuration. &#160;You may want to change to the &quot;release&quot; configuration and make adjustments to the optimization settings to improve efficiency. &#160;If you have a problem with the &quot;release&quot; configuration, make sure that the GMG project is set to a &quot;Static Library (.lib)&quot;.</text></li>
            <li styleclass="Normal"></li>
          </list>
          <para styleclass="Normal"><snippet src="IgnoreMSVCRT"/></para>
        </td>
      </tr>
    </table></para>
    <para styleclass="Normal" style="text-indent:-18px; margin-left:18px;"><image src="hmtoggle_plus0.gif" scale="100.00%" styleclass="Normal"></image><tab /><toggle type="dropdown" print-expanded="true" help-expanded="false" defaultstyle="true" translate="true" src-collapsed="hmtoggle_plus0.gif" src-expanded="hmtoggle_plus1.gif" styleclass="Normal"><caption translate="true"><![CDATA[Visual Studio 2008 with Intel C++ compiler 11.0 and Intel Visual Fortran compiler 11.0]]></caption></toggle></para>
    <para styleclass="Normal" style="text-indent:-18px; margin-left:18px;"><table styleclass="Default" rowcount="1" colcount="1">
      <tr style="vertical-align:top">
        <td>
          <para styleclass="Normal"><text styleclass="Normal" style="font-weight:bold;" translate="true">These instructions are by Richard B. Winston. They are adapted from the Microsoft Visual Studio 2005 with Intel Fortran Compiler 11.1 above.</text></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true">To compile MODFLOW-2005, the following instructions can be used except that step 2 should be skipped and the directory names for the source code would be slightly different.</text></para>
          <list id="41" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">First, extract the source code being sure to retain the directory structure inside the compressed download file. </text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Copy par-non.f from the mf2k.1_19\src\mf2k\serial directory to the mf2k.1_19\src\mf2k directory. </text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Rename the mf2k.1_19\src\mf2k directory to mf2k.1_19\src\temp directory</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Open Microsoft Visual Studio 2008</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Select File&gt;New&gt;Project: Make sure to select the settings according to the following window. &#160;You can give the project a name, such as mf2k, and set the location to the location of the MODFLOW Fortran source files. &#160;Then click OK. </text></li>
          </list>
          <para styleclass="Normal" style="text-align:center;"><image src="VS2008_1_NewProject.png" scale="100.00%" styleclass="Image Caption"><title translate="true">Dialog box showing how to create a new Intel Fortran Empty Project</title></image></para>
          <list id="41" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Copy all the files from the mf2k.1_19\src\temp to the mf2k.1_19\src\mf2k directory created by Visual Studio</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Now you need to add all of the Fortran files to the mf2k project that you just created. &#160;You can do this by selecting Project&gt;Add Existing Item... &#160;Select all of the Fortran source files in the mf2k subdirectory and click Add. </text></li>
          </list>
          <para styleclass="Normal" style="text-align:center;"><image src="VS2008_2_AddFortranfiles.png" scale="100.00%" styleclass="Image Caption"><title translate="true">Add Existing Item dialog box showing all Fortran files being selected</title></image></para>
          <list id="41" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Next, you need to create a new project for the GMG solver because a project can contain only a single programming language. &#160;Click File&gt;New&gt;Project. &#160;Then select the settings as follows making sure to &quot;Add to Solution&quot;.</text></li>
          </list>
          <para styleclass="Normal" style="text-align:center;"><image src="VS2008_3_NewCPlusPlus.png" scale="100.00%" styleclass="Image Caption"><title translate="true">New Project dialog box with new Visual C++ Console application selected</title></image></para>
          <list id="41" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">In the Win32 Application Wizard, click the Finish button</text></li>
          </list>
          <para styleclass="Normal" style="text-align:center;"><image src="VS2008_4_Wizard.png" scale="100.00%" styleclass="Image Caption"><title translate="true">Final dialog box in the Win32 Appliation Wizard</title></image></para>
          <list id="41" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Remove all the header and source files from the gmg project by right-clicking on them and selecting Remove from the pop-up menu.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Now you should see that the gmg project has been added to the solution. &#160;This will be shown in the Solution Explorer Window. &#160;To add the gmg C files to the gmg project, select Project&gt;Add Existing Item... (make sure that the gmg project is selected in the solution window). &#160;Add only the .c and .h files as follows and click Add: &#160;</text></li>
          </list>
          <para styleclass="Normal" style="text-align:center;"><image src="VS2008_5_AddGmgFiles.png" scale="100.00%" styleclass="Image Caption"><title translate="true">Add Existing Item dialog box with all .c and .h files selected. </title></image></para>
          <list id="41" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Right click on the gmg project and select Intel C++ compiler pro&gt;Use Intel C++</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Now select Project&gt;Project Dependencies. &#160;Then select the mf2k project and check the underlying box that says gmg as follows: &#160;</text></li>
          </list>
          <para styleclass="Normal" style="text-align:center;"><image src="VS2008_6_ProjectDependencies.png" scale="100.00%" styleclass="Image Caption"><title translate="true">Project Dependiencies dialog box with gmg selected.</title></image></para>
          <list id="41" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Now select Project&gt;Properties for the gmg project and change the configuration type from .exe to a static library (.lib) as follows: &#160;</text></li>
          </list>
          <para styleclass="Normal" style="text-align:center;"><image src="VS2008_7_StaticLib.png" scale="100.00%" styleclass="Image Caption"><title translate="true">Property Pages fo the gms project with the Configuration type changed to Static Library.</title></image></para>
          <list id="41" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Turn off the use of precompiled headers.</text></li>
          </list>
          <para styleclass="Normal" style="text-align:center;"><image src="VS2008_8_PrecompiledHeaders.png" scale="100.00%" styleclass="Image Caption"><title translate="true">Project Pages for gmg project with Create/Use Precompiled Header selected.</title></image></para>
          <list id="41" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">In the Fortran code project property (shown after click on the &apos;property&apos; in the popped list when you right-click on the title of the Fortran project in the solution explorer), &apos;Configuration properties&gt;Fortran&gt;Diagnostics&gt;Check Routine Interfaces&apos; should be &quot;NO&quot;, otherwise the program generates error messages. </text></li>
          </list>
          <para styleclass="Normal" style="text-align:center;"><image src="VS2008_9_CheckRoutineInterfaces.png" scale="100.00%" styleclass="Image Caption"><title translate="true">Property Pages for mf2k project with Check Routine Interfaces turned off.</title></image></para>
          <list id="41" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">In the Fortran code project property, &apos;Configuration properties&gt;Linker&gt;General&gt;Enable Incremental Linking&quot; should be &quot;YES&quot;, to avoid an error. </text></li>
          </list>
          <para styleclass="Normal" style="text-align:center;"><image src="VS2008_10_IncrementalLinking.png" scale="100.00%" styleclass="Image Caption"><title translate="true">Property Pages for mf2k project Incremental linking turned on.</title></image></para>
          <list id="41" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">The same option for both of &apos;Configuration properties&gt;Fortran&gt;Libraries&gt;Runtime Library&apos; in the Fortran code project property and &apos;Configuration properties&gt;C/C++&gt;Code Generation&gt;Runtime Library&apos; in the C code project, i.e., gmg, property is recommended. E.g., if &quot;Multi-threaded Debug (/MTd)&quot; is chosen for the C code part, the same one is recommended to choose for the counterpart in the Fortran project. </text></li>
          </list>
          <para styleclass="Normal" style="text-align:center;"><image src="VS2008_11_CPlusPlusRuntime.png" scale="100.00%" styleclass="Image Caption"><title translate="true">Property Pages for gmg project with multithreaded debug selected</title></image></para>
          <para styleclass="Normal" style="text-align:center;"><image src="VS2008_12_FortranRuntime.png" scale="100.00%" styleclass="Image Caption"><title translate="true">Property Pages for mf2k project with multithreaded debug selected</title></image></para>
          <list id="41" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">If &quot;DLL&quot; is chosen, it will cause an error. E.g., &quot;Multi-threaded DLL (/MD)&quot; is chosen for &apos;Configuration properties&gt;C/C++&gt;Code Generation&gt;Runtime Library&apos; in the C code project property will not work. </text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Also include the path to the default Intel Fortan header file and library directories in the GMG project property dialog box. </text></li>
          </list>
          <para styleclass="Normal" style="text-align:center;"><image src="VS2008_13_HeaderPath.png" scale="100.00%" styleclass="Image Caption"><title translate="true">Property Pages for gmg project with an additional include directory specified.</title></image></para>
          <list id="41" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">You are now ready to compile MODFLOW-2000, including the GMG solver. &#160;Click Build&gt;Build Solution. &#160;Keep in mind that &quot;debug&quot; is the default configuration. &#160;You may want to change to the &quot;release&quot; configuration and make adjustments to the optimization settings to improve efficiency. &#160;If you have a problem with the &quot;release&quot; configuration, make sure that the GMG project is set to a &quot;Static Library (.lib)&quot;. </text></li>
          </list>
        </td>
      </tr>
    </table></para>
    <para styleclass="Normal" style="text-indent:-18px; margin-left:18px;"><image src="hmtoggle_plus0.gif" scale="100.00%" styleclass="Normal"></image><tab /><toggle type="dropdown" print-expanded="true" help-expanded="false" defaultstyle="true" translate="true" src-collapsed="hmtoggle_plus0.gif" src-expanded="hmtoggle_plus1.gif" styleclass="Normal"><caption translate="true"><![CDATA[GNU gfortran on Mac OS X (UNIX)]]></caption></toggle></para>
    <para styleclass="Normal" style="text-indent:-18px; margin-left:18px;"><table rowcount="1" colcount="1" style="width:auto; cell-padding:0px; cell-spacing:0px; page-break-inside:auto; border-width:0px; border-spacing:0px; cell-border-width:0px; border-style:none; background-color:none; head-row-background-color:none; alt-row-background-color:none;">
      <tr style="vertical-align:top">
        <td>
          <para styleclass="Normal"><text styleclass="Normal" style="font-weight:bold;" translate="true">Thanks to Theo Olsthoorn for the following suggestions regarding compiling with gfortran on the Mac.</text></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true">-- Jaime Carrera’s suggestion to use the fno-second-underscore does is not necessary, at least on the Mac.</text></para>
          <para styleclass="Normal"></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true">-- I have compiled on the unix version underlying the Mac OS X system.</text></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true">The only changes to the makefile were </text></para>
          <para styleclass="Normal"></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true">F77= gfortran</text></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true">F90= gfortran</text></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true">CC= &#160;gfortran</text></para>
          <para styleclass="Normal"></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true">After which mf2k.1_18 compiles and links perfectly after typing make on the command line.</text></para>
        </td>
      </tr>
    </table></para>
    <para styleclass="Normal" style="text-indent:-18px; margin-left:18px;"><image src="hmtoggle_plus0.gif" scale="100.00%" styleclass="Normal"></image><tab /><toggle type="dropdown" print-expanded="true" help-expanded="false" defaultstyle="true" translate="true" src-collapsed="hmtoggle_plus0.gif" src-expanded="hmtoggle_plus1.gif" styleclass="Normal"><caption translate="true"><![CDATA[GNU Fortran (gfortran)]]></caption></toggle></para>
    <para styleclass="Normal" style="text-indent:-18px; margin-left:18px;"><table rowcount="1" colcount="1" style="width:auto; cell-padding:0px; cell-spacing:0px; page-break-inside:auto; border-width:0px; border-spacing:0px; cell-border-width:0px; border-style:none; background-color:none; head-row-background-color:none; alt-row-background-color:none;">
      <tr style="vertical-align:top">
        <td>
          <para styleclass="Normal"><text styleclass="Normal" translate="true">The methods described for gfortran on the Mac might work on other operating systems too.</text></para>
          <para styleclass="Normal"><text styleclass="Normal" style="font-weight:bold;" translate="true">Thanks to Jaime Carrera for the following suggestions regarding compiling with gfortran.</text></para>
          <para styleclass="Normal"></para>
          <list id="42" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Modify the makefile file:</text></li>
          </list>
          <para styleclass="Normal"><text styleclass="Normal" translate="true"> &#160; &#160; &#160;F77FLAGS = -fno-second-underscore</text></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true"> &#160; &#160; &#160;F77= gfortran</text></para>
          <list id="42" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">On the command line just type (under src/mf2k/)</text></li>
          </list>
          <para styleclass="Normal"><text styleclass="Normal" translate="true"> &#160; &#160; &#160;make install</text></para>
          <para styleclass="Normal"></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true">Jaime Carrera says he tested it on Linux - Fedora Core 4.</text></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true">Miles McCammon says these instructions worked for MODFLOW 2005 on Linux Ubuntu 9.04 using gfortran. </text></para>
          <para styleclass="Normal"></para>
          <para styleclass="Normal"><text styleclass="Normal" style="font-weight:bold;" translate="true">Thanks to Henk den Adel for the following instructions.</text></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true">The GNU version of the Fortran 95 compiler (gfortran, i.e. not the G95 project) allows one to compile the .f files and the .c files.</text></para>
          <list id="43" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Comment out lines 5, 6 and 7 of solvers.h</text></li>
          </list>
          <para styleclass="Normal"></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true"> &#160; &#160; &#160;/* Append underscore to fortran modual name */</text></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true"> &#160; &#160; &#160;//#ifdef _UF/</text></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true"> &#160; &#160; &#160;/#define resprint resprint</text></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true"> &#160; &#160; &#160;//#endif</text></para>
          <para styleclass="Normal"></para>
          <list id="43" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true"> &#160; 2. Change lines 11..17 of mf2kgmg.h into</text></li>
          </list>
          <para styleclass="Normal"></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true"> &#160; &#160; &#160;/* Append underscore to functions called from FORTRAN GMG interface */</text></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true"> &#160; &#160; &#160;#ifdef _UF</text></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true"> &#160; &#160; &#160;#define MF2KGMG_ALLOCATE &#160; mf2kgmg_allocate</text></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true"> &#160; &#160; &#160;#define MF2KGMG_FREE &#160; &#160; &#160; mf2kgmg_free</text></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true"> &#160; &#160; &#160;#define MF2KGMG_ASSEMBLE &#160; mf2kgmg_assemble</text></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true"> &#160; &#160; &#160;#define MF2KGMG_EVAL &#160; &#160; &#160; mf2kgmg_eval</text></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true"> &#160; &#160; &#160;#define MF2KGMG_UPDATE &#160; &#160; mf2kgmg_update</text></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true"> &#160; &#160; &#160;#define MF2KGMG_BIGR &#160; &#160; &#160; mf2kgmg_bigr</text></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true"> &#160; &#160; &#160;#define MF2KGMG_BIGH &#160; &#160; &#160; mf2kgmg_bigh</text></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true"> &#160; &#160; &#160;#endif</text></para>
          <para styleclass="Normal"></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true"> &#160; &#160; &#160;Do not append the tailing underscore. The -fno-underscoring makes it unnecessary. However, functions are case sensitive for this compiler.</text></para>
          <para styleclass="Normal"></para>
          <list id="43" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">To compile the .f files use:</text></li>
          </list>
          <para styleclass="Normal"></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true"> &#160; &#160; &#160;gfortran -c -fno-underscoring file.f</text></para>
          <para styleclass="Normal"></para>
          <list id="43" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">To compile the .c files use:</text></li>
          </list>
          <para styleclass="Normal"></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true"> &#160; &#160; &#160;gfortran -c -D_UF -Ilocation file.c</text></para>
          <para styleclass="Normal"></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true"> &#160; &#160; &#160;where &apos;location&apos; points to the drive and directory where the include files for gfortran are located.</text></para>
          <para styleclass="Normal"></para>
          <list id="43" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">To link the object files into an executable use:</text></li>
          </list>
          <para styleclass="Normal"></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true"> &#160; &#160; &#160;gfortran *.o -o mf2k</text></para>
          <para styleclass="Normal"></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true">Final remark: Henk den Adel says he did not check whether the program runs; however all errors due to &apos;undefined references&apos; were gone.</text></para>
        </td>
      </tr>
    </table></para>
    <para styleclass="Normal" style="text-indent:-18px; margin-left:18px;"><image src="hmtoggle_plus0.gif" scale="100.00%" styleclass="Normal"></image><tab /><toggle type="dropdown" print-expanded="true" help-expanded="false" defaultstyle="true" translate="true" src-collapsed="hmtoggle_plus0.gif" src-expanded="hmtoggle_plus1.gif" styleclass="Normal"><caption translate="true"><![CDATA[GNU Fortran and the GNU C compiler on the Mac OSX]]></caption></toggle></para>
    <para styleclass="Normal" style="text-indent:-18px; margin-left:18px;"><table styleclass="Default" rowcount="1" colcount="1">
      <tr style="vertical-align:top">
        <td>
          <para styleclass="Normal"><text styleclass="Normal" translate="true">Laurent Delphin has provided a makefile for compiling MODFLOW-2005 on the Mac.</text></para>
          <para styleclass="Normal"><link displaytype="text" defaultstyle="true" type="filelink" href="makefile" styleclass="Normal" translate="true">makefile</link></para>
        </td>
      </tr>
    </table></para>
    <para styleclass="Normal" style="text-indent:-18px; margin-left:18px;"><image src="hmtoggle_plus0.gif" scale="100.00%" styleclass="Normal"></image><tab /><toggle type="dropdown" print-expanded="true" help-expanded="false" defaultstyle="true" translate="true" src-collapsed="hmtoggle_plus0.gif" src-expanded="hmtoggle_plus1.gif" styleclass="Normal"><caption translate="true"><![CDATA[Suggestions for compiling the Conduit Flow Process for MODFLOW-2005]]></caption></toggle></para>
    <para styleclass="Normal" style="text-indent:-18px; margin-left:18px;"><table styleclass="Default" rowcount="1" colcount="1">
      <tr style="vertical-align:top">
        <td>
          <para styleclass="Normal"><text styleclass="Normal" translate="true">The Conduit Flow Process (</text><conditional-text type="IF" value="ALLMODELS,MODFLOW-CFP"/><link displaytype="text" defaultstyle="true" type="topiclink" href="CFP" styleclass="Normal" translate="true">CFP</link><conditional-text type="ELSE"/><text styleclass="Normal" translate="true">CFP</text><conditional-text type="END"/><text styleclass="Normal" translate="true">) was complied using double precision for real variables and arrays (Compiler setting was Default, Real, Kind=8). </text></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true">CFP relies on several FORTRAN routines from Numerical Recipes in Fortran (1992). Due to copyright restrictions the source code for these routines cannot be publicly released by the U.S. Geological Survey. &#160;Users interested in compiling CFP will need to obtain copies of the LUDCMP, LUBKSP, and MPROVE routines (or equivalent routines) prior to compiling the program.</text></para>
          <para styleclass="Normal"></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true">Numerical Recipes in Fortran 1992</text></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true">W. H. Press, S. A. Teukolsky, W. T. Vetterling adnd B. P. Flannery</text></para>
          <para styleclass="Normal"></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true">SUBROUTINE LUDCMP(A, N, Np, Indx, D)</text></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true">SUBROUTINE LUBKSB(A, N, Np, Indx, B)</text></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true">SUBROUTINE MPROVE(A, Alud, N, Np, Indx, B, X)</text></para>
        </td>
      </tr>
    </table></para>
    <para styleclass="Normal" style="text-indent:-18px; margin-left:18px;"><image src="hmtoggle_plus0.gif" scale="100.00%" styleclass="Normal"></image><tab /><toggle type="dropdown" print-expanded="true" help-expanded="false" defaultstyle="true" translate="true" src-collapsed="hmtoggle_plus0.gif" src-expanded="hmtoggle_plus1.gif" styleclass="Normal"><caption translate="true"><![CDATA[FTN95 and Watcom Compilers for Compiling MODFLOW-2005]]></caption></toggle></para>
    <para styleclass="Normal" style="text-indent:-18px; margin-left:18px;"><table styleclass="Default" rowcount="1" colcount="1">
      <tr style="vertical-align:top">
        <td>
          <para styleclass="Normal"><text styleclass="Normal" translate="true">From Matt Gloe</text></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true">Install ftn95_personal </text><link displaytype="text" defaultstyle="true" type="weblink" href="http://www.silverfrost.com/32/ftn95/ftn95_personal_edition.aspx" target="_blank" styleclass="Normal" translate="true">http://www.silverfrost.com/32/ftn95/ftn95_personal_edition.aspx</link></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true">Install C from watcom &#160;</text><link displaytype="text" defaultstyle="true" type="weblink" href="&lt;%LINK_CAPTION%&gt;" target="_blank" styleclass="Normal" translate="true">http://www.openwatcom.org/index.php/Download</link></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true">Keep the default installation directory</text></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true">Copy the file compMF.bat &#160;(shown below) into the working directory (compMF = compile ModFlow). The locations of the compiler exe files are hardcoded to avoid path errors.</text></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true">Open a “CMD” window and change to the working directory. At the prompt type compMF and press enter. </text></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true">If you have errors, the best way to find them is to redirect output from the compMF batch file to a log file.</text></para>
          <para styleclass="Code Example"><text styleclass="Code Example" translate="true">compMF &gt;&gt; comp.log</text></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true">To check comp.log type</text></para>
          <para styleclass="Code Example"><text styleclass="Code Example" translate="true">notepad comp.log </text></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true">Note that the new executable will be created in the source code directory</text></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true">Also note that in older Fortran compilers, the code should be up to (and including) col 72. Fortran 95 is more flexible, but for compatibility, please keep each line under 72 cols</text></para>
          <para styleclass="Normal" style="text-indent:-18px; margin-left:18px;"><image src="hmtoggle_plus0.gif" scale="100.00%" styleclass="Normal"></image><tab /><toggle type="dropdown" print-expanded="true" help-expanded="false" defaultstyle="true" translate="true" src-collapsed="hmtoggle_plus0.gif" src-expanded="hmtoggle_plus1.gif" styleclass="Normal"><caption translate="true"><![CDATA[Compmf.bat]]></caption></toggle></para>
          <para styleclass="Normal" style="text-indent:-18px; margin-left:18px;"><table styleclass="Default" rowcount="1" colcount="1">
            <tr style="vertical-align:top">
              <td>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">echo start</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">del *.obj</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">del mf2005.exe</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; de47.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; gmg7.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; gwf2bas7.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; gwf2bcf7.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; gwf2chd7.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; gwf2drn7.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; gwf2drt7.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; gwf2ets7.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; gwf2evt7.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; gwf2fhb7.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; gwf2gag7.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; gwf2ghb7.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; gwf2hfb7.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; gwf2huf7.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; gwf2hydmod7.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; gwf2ibs7.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; gwf2lak7.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; gwf2lpf7.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; gwf2mnw17.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; gwf2mnw27.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; gwf2mnw2i7.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; gwf2rch7.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; gwf2res7.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; gwf2riv7.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; gwf2sfr7.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; gwf2str7.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; gwf2sub7.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; gwf2swt7.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; gwf2uzf1.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; gwf2wel7.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; gwfsfrmodule.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; gwfuzfmodule.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; hufutl7.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; lmt7.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; mhc7.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; obs2bas7.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; obs2chd7.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; obs2drn7.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; obs2ghb7.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; obs2riv7.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; obs2str7.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; parutl7.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; pcg7.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; sip7.f</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; utl7.f /ALT_kinds</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">c:\watcom\binnt\wcc386.exe &#160;r_vector.c</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">c:\watcom\binnt\wcc386.exe &#160;solvers.c</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">c:\watcom\binnt\wcc386.exe &#160;ccfd.c</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">c:\watcom\binnt\wcc386.exe &#160;mf2kgmg.c</text></para>
                <para styleclass="Code Example"><text styleclass="Code Example" translate="true">&quot;C:\Program Files\Silverfrost\FTN95\FTN95.exe&quot; &#160; mf2005.f /link</text></para>
              </td>
            </tr>
          </table></para>
        </td>
      </tr>
    </table></para>
    <para styleclass="Normal" style="text-indent:-18px; margin-left:18px;"><image src="hmtoggle_plus0.gif" scale="100.00%" styleclass="Normal"></image><tab /><toggle type="dropdown" print-expanded="true" help-expanded="false" defaultstyle="true" translate="true" src-collapsed="hmtoggle_plus0.gif" src-expanded="hmtoggle_plus1.gif" styleclass="Normal"><caption translate="true"><![CDATA[Code::Blocks and Gfortran]]></caption></toggle></para>
    <para styleclass="Normal" style="text-indent:-18px; margin-left:18px;"><table styleclass="Default" rowcount="1" colcount="1">
      <tr style="vertical-align:top">
        <td>
          <para styleclass="Normal"><text styleclass="Normal" style="font-weight:bold;" translate="true">These instructions are by Richard B. Winston with additional material from Leonard Konikow. </text></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true">The first step is to install Code::Blocks and gfortran. Gfortran is included in “MinGW” which is included with the Windows installer for Code::Blocks. For other operating systems, you may need to install Gfortran separately. First go to </text><link displaytype="text" defaultstyle="true" type="weblink" href="http://www.codeblocks.org/downloads" target="_blank" styleclass="Normal" translate="true">http://www.codeblocks.org/downloads</link><text styleclass="Normal" translate="true"> and click on the link for “Download the binary release.” Then choose the installer for your operating system. There are several different ones available. If you are on Windows, you will need MinGW so choose one of the installers that includes MinGW unless you already have MinGW installed. At the time this was written, the installer that you are most likely to be appropriate is “codeblocks-12.11mingw-setup.exe.” However, by the time you read this, there may be a more recent version. &#160;Once the installer has downloaded, use the installer to install Code::Blocks.</text></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true">Note: in CodeBlocks version 17.12, you should not use the included gfortran compiler. Instead download a newer version of MinGW and use its compiler and debugger. You can get if from </text><link displaytype="text" defaultstyle="true" type="weblink" href="http://www.mingw.org/" target="_blank" styleclass="Normal" translate="true">http://www.mingw.org/</link><text styleclass="Normal" translate="true">. I had more difficulty with a 64-bit version I got from SourceForge. These instructions are for the version from mingw.org. You specify the compiler under &quot;Settings|Compiler&quot; on the &quot;Toolchain executables&quot; tab of the &quot;Global compiler settings.&quot;</text></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true">Start Code::Blocks. </text></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true">It will ask you to select a default compiler. You can select the GNU Fortran compiler.</text><br/><image src="CodeBlockCompilersAutoDetect.png" scale="100.00%" styleclass="Image Caption"><title translate="true">CodeBlock Compiler auto-detection with GNU Fortran Compiler selected</title></image></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true">It will display a dialog box asking whether you want associate C++ files with Code::Blocks. It is up to you how you wish to respond. </text><br/><image src="CodeBlockAssociateFiles.png" scale="100.00%" styleclass="Image Caption"><title translate="true">File associations left unchanged.</title></image></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true">Next you may need to configure Code::Blocks to use gfortran. </text></para>
          <list id="44" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Select “Settings|Compiler.”</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Select the GNU Fortran Compiler, make sure the debugger is set to GDB/CDB debugger, and click OK.</text></li>
          </list>
          <para styleclass="Normal"><text styleclass="Normal" translate="true">If you have not already done so, download MODFLOW-2005 from the USGS web site (</text><link displaytype="text" defaultstyle="true" type="weblink" href="http://water.usgs.gov/nrp/gwsoftware/modflow2005/modflow2005.html" target="_blank" styleclass="Normal" translate="true">https://water.usgs.gov/ogw/modflow/MODFLOW.html</link><text styleclass="Normal" translate="true">). MODFLOW-2005 comes in a zip file that you will need to unzip. The directory to which it is normally unzipped is “C:\WRDAPP.” (WRDAPP stands for Water Resources Division Application.) On of the subdirectories include in the zip file is named “src.” It contains the source code for MODFLOW-2005. There are two subdirectories of the src directory that contain the source code for two other programs that are distributed with MODFLOW-2005. We won’t deal with those other programs.</text></para>
          <para styleclass="Normal"><text styleclass="Normal" translate="true">Here are step-by-step instructions on compiling MODFLOW-2005.</text></para>
          <list id="45" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">In Code::Blocks, select “File|New|Project” or click the “Create new project” link.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Select “Fortran Application” and click the Go button. </text><br/><image src="New_from_template_2013-10-03_14-48-33.png" scale="70.00%" width="425" height="321" styleclass="Image Caption"><title translate="true">New Fortran application selected</title></image></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">A new “wizard” dialog box will appear. If you have never used Code::Blocks before, the first page of the dialog box does nothing so just click the “Next” button.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">On the next page, specify a project title and a folder for MODFLOW-2005 and click the “Next” button. In this example, we will use “MF2005” as the name of the project. Code::Blocks will create a subfolder in that directory to contain the source code for the project. In this case, the folder is “C:\MF2005.”</text><br/><image src="Fortran_application_2013-10-04_16-03-08.png" scale="70.00%" width="399" height="338" styleclass="Image Caption"><title translate="true">Specifying the project title in Codeblocks</title></image></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">On the next page, be sure to set the compiler to the gfortran compiler and click the “Finish” button. &#160;</text><br/><image src="Fortran_application_2013-10-04_16-06-20.png" scale="70.00%" width="399" height="338" styleclass="Image Caption"><title translate="true">Specifying the GNU GFortran Compiler</title></image></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">At this point, the workspace will contain one file named “main.f95” under “Fortran Sources” that was automatically generated by Code::Blocks. That file isn’t needed because we already have all of the source code for MODFLOW. Click on it to select it. Then right-click and select “Remove file from project” from the pop-up menu. You may also delete the file from your computer using Windows Explorer. &#160;</text><br/><image src="MF2005_CodeBlocks 12.png" scale="70.00%" width="824" height="429" styleclass="Image Caption"><title translate="true">Codeblocks with main.f95 visible</title></image></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Copy all the source code files into the folder for the project (C:\MF2005).</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Right-click on “MF2005” and select “Add files…” from the pop-up menu.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Select all the files in the folder for the project except MF2005.cbp, nogmg.txt, and openspec.inc. That should be all the files with the extension “.f”, “.f90”, “.c”, or “.h”. &#160;(MF2005.cbp is the Code::Blocks project file. Nogmg.txt is used to replace gmg.f if MODFLOW is being compiled without the GMG package. Openspec.inc is part of the source code that will be “included” in several different source code files.)</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Code::Blocks will display a dialog box asking to which targets the files should belong. The default is that the files should belong to both the debug and release targets which is what we want so just click OK. </text><br/><image src="Multiple_selection_2013-10-04_16-25-32.png" scale="100.00%" styleclass="Image Caption"><title translate="true">Specifying targets</title></image><text styleclass="Normal" translate="true">&#32;</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Select Project|Build Options, select MF2005, and select the “Compiler Settings” tab. Under that select the “Other options” tab. Enter &quot;-D _UF&quot; on that tab. This step defines &quot;_UF&quot; when compiling some of the C code in MODFLOW.</text><br/><image src="Project_build_options_2013-10-04_17-06-03.png" scale="70.00%" width="496" height="368" styleclass="Image Caption"><title translate="true">Build option for MF2005 in Codeblocks</title></image><text styleclass="Normal" translate="true">&#32;</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Switch to the Linker settings tab and click the “Add” button under “Link libraries”. Select the file libgfortran.a which you may find at C:\MinGW\lib\gcc\mingw32\6.3.0. When it asks if you want to “Keep this as a relative path?”, click the Yes button. Click the Add button two more times and select libgcc.a and libquadmath.a too. (If you choose to skip this step, you can still compile MODFLOW but you will need to have some dlls available for MODFLOW when you run it. Look for the dlls in C:\MinGW\bin.) Also add &quot;-static-libgcc&quot; &quot;-static-libstdc++&quot; under &quot;Other linker options&quot;</text><br/><image src="Project_build_options_2013-10-03_21-09-40.png" scale="80.00%" width="602" height="309" styleclass="Image Caption"><title translate="true">specifying additional required libraries</title></image></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">(Note: This step may no longer be necessary with the current version of CodeBlocks (version 16.01).) Because of dependencies among the various source code files in MODFLOW, the order in which they are compiled is important with gfortran. (With other compilers, it may not be necessary to specify a compile order.) The order in which the files are compiled can be controlled using the “priority weight” for each file. The default priority weight is 50. We will need to specify smaller priority weights for some files in order to control the order in which the files are compiled. The table below gives the priority weights that will be assigned. To assign a priority weight, expand “Fortran Sources” and right click on one of the files. From the pop-up menu, select “Properties”. In the dialog box, select the “Build” tab and use the slider to set the priority weight.</text><br/><image src="Properties_of_gwf2bas7.png" scale="70.00%" width="332" height="329" styleclass="Image Caption"><title translate="true">Specifying the priority of of a file.</title></image></li>
          </list>
          <para styleclass="Normal"><table styleclass="Default" rowcount="15" colcount="2" style="cell-padding:2px; cell-spacing:2px; border-width:1px; border-spacing:2px; cell-border-width:1px; border-color:#000000; border-style:raised-color;">
            <tr style="vertical-align:top">
              <td>
                <para styleclass="Normal"><text styleclass="Normal" translate="true">File name</text></para>
              </td>
              <td>
                <para styleclass="Normal"><text styleclass="Normal" translate="true">Priority Weight</text></para>
              </td>
            </tr>
            <tr style="vertical-align:top">
              <td>
                <para styleclass="Normal"><text styleclass="Normal" translate="true">gwf2bas7.f</text></para>
              </td>
              <td>
                <para styleclass="Normal"><text styleclass="Normal" translate="true">20</text></para>
              </td>
            </tr>
            <tr style="vertical-align:top">
              <td>
                <para styleclass="Normal"><text styleclass="Normal" translate="true">gwf2bcf7.f</text></para>
              </td>
              <td>
                <para styleclass="Normal"><text styleclass="Normal" translate="true">25</text></para>
              </td>
            </tr>
            <tr style="vertical-align:top">
              <td>
                <para styleclass="Normal"><text styleclass="Normal" translate="true">gwf2huf7.f</text></para>
              </td>
              <td>
                <para styleclass="Normal"><text styleclass="Normal" translate="true">22</text></para>
              </td>
            </tr>
            <tr style="vertical-align:top">
              <td>
                <para styleclass="Normal"><text styleclass="Normal" translate="true">gwf2ibs7.f</text></para>
              </td>
              <td>
                <para styleclass="Normal"><text styleclass="Normal" translate="true">25</text></para>
              </td>
            </tr>
            <tr style="vertical-align:top">
              <td>
                <para styleclass="Normal"><text styleclass="Normal" translate="true">gwf2lak7.f</text></para>
              </td>
              <td>
                <para styleclass="Normal"><text styleclass="Normal" translate="true">27</text></para>
              </td>
            </tr>
            <tr style="vertical-align:top">
              <td>
                <para styleclass="Normal"><text styleclass="Normal" translate="true">gwf2lpf7.f</text></para>
              </td>
              <td>
                <para styleclass="Normal"><text styleclass="Normal" translate="true">22</text></para>
              </td>
            </tr>
            <tr style="vertical-align:top">
              <td>
                <para styleclass="Normal"><text styleclass="Normal" translate="true">gwf2str7.f</text></para>
              </td>
              <td>
                <para styleclass="Normal"><text styleclass="Normal" translate="true">27</text></para>
              </td>
            </tr>
            <tr style="vertical-align:top">
              <td>
                <para styleclass="Normal"><text styleclass="Normal" translate="true">gwf2sub7.f</text></para>
              </td>
              <td>
                <para styleclass="Normal"><text styleclass="Normal" translate="true">30</text></para>
              </td>
            </tr>
            <tr style="vertical-align:top">
              <td>
                <para styleclass="Normal"><text styleclass="Normal" translate="true">gwfsfrmodule.f</text></para>
              </td>
              <td>
                <para styleclass="Normal"><text styleclass="Normal" translate="true">21</text></para>
              </td>
            </tr>
            <tr style="vertical-align:top">
              <td>
                <para styleclass="Normal"><text styleclass="Normal" translate="true">gwfuzfmodule.f</text></para>
              </td>
              <td>
                <para styleclass="Normal"><text styleclass="Normal" translate="true">22</text></para>
              </td>
            </tr>
            <tr style="vertical-align:top">
              <td>
                <para styleclass="Normal"><text styleclass="Normal" translate="true">pcg7.f</text></para>
              </td>
              <td>
                <para styleclass="Normal"><text styleclass="Normal" translate="true">30 </text></para>
              </td>
            </tr>
            <tr style="vertical-align:top">
              <td>
                <para styleclass="Normal"><text styleclass="Normal" translate="true">pcgn2.f90</text></para>
              </td>
              <td>
                <para styleclass="Normal"><text styleclass="Normal" translate="true">33</text></para>
              </td>
            </tr>
            <tr style="vertical-align:top">
              <td>
                <para styleclass="Normal"><text styleclass="Normal" translate="true">pcgn_solve2.f90</text></para>
              </td>
              <td>
                <para styleclass="Normal"><text styleclass="Normal" translate="true">30</text></para>
              </td>
            </tr>
            <tr style="vertical-align:top">
              <td>
                <para styleclass="Normal"><text styleclass="Normal" translate="true">sip7.f</text></para>
              </td>
              <td>
                <para styleclass="Normal"><text styleclass="Normal" translate="true">27</text></para>
              </td>
            </tr>
          </table></para>
          <list id="45" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Open Openspec.inc in a text editor such as Notepad. Openspec.inc has some Fortran code that used in opening binary files. What we want to do is to compile MODFLOW in such a way that a binary file is a “unstructured non-formatted” file so that programs that aren’t compiled with gfortran will be able to read them. With gfortran we need to change Openspec.inc slightly so that the binary files are unstructured non-formatted files.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">In FORTRAN, if the first character of a line is a “C”, that line is considered a comment and is ignored by the compiler. Note that most of the lines in openspec.inc are comments. There are only four lines that are not comments. The first one declares three variables named ACCESS,FORM, and ACTION. The other three lines each set one of those variables. If you look at the comments, for FORM, and ACTION, there are two versions of the lines that set those variables. For each of them, one version of the line is marked with a C as the first character and so is ignored by the compiler. The other one isn’t marked with a C as the first character and so is used by the compiler. In the version of MODFLOW with which I am working, the version of the line for ACTION is the “Standard FORTRAN” version. Leave it alone. The active version of the line for FORM is “Non-standard Fortran”. We will need to change that to the “Standard FORTRAN” version. Delete the “C” at the beginning of the line </text></li>
          </list>
          <para styleclass="Code Example"><text styleclass="Code Example" translate="true">C &#160; &#160; &#160;DATA FORM/&apos;UNFORMATTED&apos;/</text></para>
          <list id="45" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">and insert a “C” at the beginning of the line </text></li>
          </list>
          <para styleclass="Code Example"><text styleclass="Code Example" translate="true"> &#160; &#160; &#160;DATA FORM/&apos;BINARY&apos;/</text></para>
          <list id="45" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Now both FORM and ACCESS are using Standard FORTRAN. We need to make two more changes. Locate the line where ACCESS is specified. It reads</text></li>
          </list>
          <para styleclass="Code Example"><text styleclass="Code Example" translate="true"> &#160; &#160; &#160;DATA ACCESS/&apos;SEQUENTIAL&apos;/</text></para>
          <list id="45" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Insert a “C” at the beginning of that line so that it is ignored by the compiler. Then insert the following lines. Do not use tab characters instead of spaces.</text></li>
          </list>
          <para styleclass="Code Example"><text styleclass="Code Example" translate="true">C</text></para>
          <para styleclass="Code Example"><text styleclass="Code Example" translate="true">c &#160; &#160;Non-standard Fortran that causes code compiled by gfortran</text></para>
          <para styleclass="Code Example"><text styleclass="Code Example" translate="true">C &#160; &#160;on personal computers to use unstructured non-formatted</text></para>
          <para styleclass="Code Example"><text styleclass="Code Example" translate="true">C &#160; &#160;files. &#160;This may make it possible for the non-formatted files used</text></para>
          <para styleclass="Code Example"><text styleclass="Code Example" translate="true">C &#160; &#160;by MODFLOW to be used with programs that are compiled by other</text></para>
          <para styleclass="Code Example"><text styleclass="Code Example" translate="true">C &#160; &#160;compilers.</text></para>
          <para styleclass="Code Example"><text styleclass="Code Example" translate="true">C</text></para>
          <para styleclass="Code Example"><text styleclass="Code Example" translate="true"> &#160; &#160; &#160;DATA ACCESS/&apos;STREAM&apos;/</text></para>
          <list id="45" type="ol" listtype="decimal" formatstring="&#37;&#48;&#58;&#115;&#46;" format-charset="DEFAULT_CHARSET" levelreset="true" legalstyle="false" startfrom="1" styleclass="Normal" style="font-family:&apos;Times New Roman&apos;; font-size:12pt; color:#000000;">
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Save Openspec.inc</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Right-click on gwf2lpf7.f and select &quot;Build&quot;. (This step is required in CodeBlocks version 16.01 but not in some earlier versions.) For MODFLOW-NWT, try right clicking on the following files in the order specified and selecting Build from the pop-up menu. gwf2bas7_NWT.f, mach_mod.f90, NWT1_module.f, gwf2upw1.f, gwfsfrmodule.f, gwfuzfmodule.f, gwflakmodule_NWT.f, gwf2huf7.f, gwf2lpf7.f, gwf2ibs.f, gwf2bcf7.f, sip7_NWT.f, pcg7_NWT.f, gwf2lak7_NWT.f, gwf2sfr7.f, gwf2str7.f, and gwf2sub7_NWT. In general, if you get an error message about a missing .mod file, search the source code for the relevant module and try building that file separately first.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">Select “Build|Build.” If you get error messages, check to see if the following steps help.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true">If you get an error message like the ones below, go to the appropriate lines and fix the error and then try to build MODFLOW again. In this case, you just have to change a line like</text><br/><text style="font-family:&apos;Courier New&apos;; font-size:12pt; color:#000000; background-color:#ccffff;" translate="true"> &#160; &#160; &#160; &#160; IF ( LVAL.EQ. .FALSE. ) THEN</text><br/><text styleclass="Normal" translate="true">to</text><br/><text style="font-family:&apos;Courier New&apos;; font-size:12pt; color:#000000; background-color:#ccffff;" translate="true"> &#160; &#160; &#160; &#160; IF ( LVAL.EQV. .FALSE. ) THEN</text><br/><image src="SourceBugs.png" scale="100.00%" styleclass="Image Caption"><title translate="true">Illustration of error message &quot;Error: Logicals must be compared with .eqv. instead of .eq.&quot;</title></image><br/><text styleclass="Normal" translate="true">Then select Build|Rebuild workspace.</text></li>
            <li styleclass="Normal"><text styleclass="Normal" translate="true"> With some distributions of MinGW, it may be necessary to place a .dll in the folder container containing the executable file. The required dll should be somewhere in the MinGW directory structure.</text></li>
          </list>
        </td>
      </tr>
    </table></para>
    <para styleclass="Normal"></para>
  </body>
</topic>
